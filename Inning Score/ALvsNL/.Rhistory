one_run$away_inning_runs <- as.numeric(as.character(one_run$away_inning_runs))
one_run$url <- NULL
j = 1
for (i in 1:nrow(one_run)) {
diff = abs(one_run[i,2] - one_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (one_run[i,2] > one_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (one_run[i,2] < one_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 2nd Inning
two_run$inning <- as.numeric(as.character(two_run$inning))
two_run$home_inning_runs <- as.numeric(as.character(two_run$home_inning_runs))
two_run$away_inning_runs <- as.numeric(as.character(two_run$away_inning_runs))
two_run$url <- NULL
j = 2
for (i in 1:nrow(two_run)) {
diff = abs(two_run[i,2] - two_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (two_run[i,2] > two_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (two_run[i,2] < two_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 3rd Inning
three_run$inning <- as.numeric(as.character(three_run$inning))
three_run$home_inning_runs <- as.numeric(as.character(three_run$home_inning_runs))
three_run$away_inning_runs <- as.numeric(as.character(three_run$away_inning_runs))
three_run$url <- NULL
j = 3
for (i in 1:nrow(three_run)) {
diff = abs(three_run[i,2] - three_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (three_run[i,2] > three_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (three_run[i,2] < three_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 4th Inning
four_run$inning <- as.numeric(as.character(four_run$inning))
four_run$home_inning_runs <- as.numeric(as.character(four_run$home_inning_runs))
four_run$away_inning_runs <- as.numeric(as.character(four_run$away_inning_runs))
four_run$url <- NULL
j = 4
for (i in 1:nrow(four_run)) {
diff = abs(four_run[i,2] - four_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (four_run[i,2] > four_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (four_run[i,2] < four_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 5th Inning
five_run$inning <- as.numeric(as.character(five_run$inning))
five_run$home_inning_runs <- as.numeric(as.character(five_run$home_inning_runs))
five_run$away_inning_runs <- as.numeric(as.character(five_run$away_inning_runs))
five_run$url <- NULL
j = 5
for (i in 1:nrow(five_run)) {
diff = abs(five_run[i,2] - five_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (five_run[i,2] > five_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (five_run[i,2] < five_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 6th Inning
six_run$inning <- as.numeric(as.character(six_run$inning))
six_run$home_inning_runs <- as.numeric(as.character(six_run$home_inning_runs))
six_run$away_inning_runs <- as.numeric(as.character(six_run$away_inning_runs))
six_run$url <- NULL
j = 6
for (i in 1:nrow(six_run)) {
diff = abs(six_run[i,2] - six_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (six_run[i,2] > six_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (six_run[i,2] < six_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 7th Inning
seven_run$inning <- as.numeric(as.character(seven_run$inning))
seven_run$home_inning_runs <- as.numeric(as.character(seven_run$home_inning_runs))
seven_run$away_inning_runs <- as.numeric(as.character(seven_run$away_inning_runs))
seven_run$url <- NULL
j = 7
for (i in 1:nrow(seven_run)) {
diff = abs(seven_run[i,2] - seven_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (seven_run[i,2] > seven_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (seven_run[i,2] < seven_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# 8th Inning
eight_run$inning <- as.numeric(as.character(eight_run$inning))
eight_run$home_inning_runs <- as.numeric(as.character(eight_run$home_inning_runs))
eight_run$away_inning_runs <- as.numeric(as.character(eight_run$away_inning_runs))
eight_run$url <- NULL
j = 8
for (i in 1:nrow(eight_run)) {
diff = abs(eight_run[i,2] - eight_run[i,3])
if (diff >= 8) {
diff = 8
}
# home team leads and eventually home team wins
if (eight_run[i,2] > eight_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] > total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
# away team leads and eventually away team wins
else if (eight_run[i,2] < eight_run[i,3]) {
total[diff, j] = total[diff, j] + 1
if (total_score[i,1] < total_score[i,2]) {
result[diff,j] = result[diff,j] + 1
}
}
}
# percent: Percentage winning the game
# write.csv(percent, "2013_percentage.csv")
# result: number of games lead for diff and eventually win
write.csv(result, "Lead_NL_result_2015.csv")
# total: number of games has lead
write.csv(total, "Lead_NL_total_2015.csv")
## Find valid games. Count games that marked "Final" && AL
count = 0
for (i in 1:nrow(game)) {
if ((game$status[i] == "Final") & (game$home_league_id[i] == 103)) {
valid_gid_AL <- c(valid_gid_AL, toString(game$url[i]))
}
}
## Game by game to count tie at some point during each game
gids_table <- data.frame(valid_gid_AL)
size = nrow(gids_table)
result = matrix(0, nrow = 8, ncol = 8)
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:size) {
temp <- XML2Obs(paste0(gids_table[i,1]))
single <- collapse_obs(temp)
single_game <- data.frame(single$`game//linescore`)
single_game$url <- NULL
single_game$home_inning_runs <- as.numeric(as.character(single_game$home_inning_runs))
single_game$away_inning_runs <- as.numeric(as.character(single_game$away_inning_runs))
single_game$inning <- as.numeric(as.character(single_game$inning))
length <- nrow(single_game)
for (j in 1:8) {
index_diff = abs(single_game[j,2] - single_game[j,3])
if (index_diff >= 8) {
index_diff = 8
}
if (index_diff > 0) {
total[index_diff, j] = total[index_diff, j] + 1
temp_home = single_game[j,2]
temp_away = single_game[j,3]
for (k in (j+1):length) {
if (toString(single_game[k,2]) == 'NA') {
single_game[k,2] = 0
}
temp_home = temp_home + single_game[k,2]
temp_away = temp_away + single_game[k,3]
if (temp_home == temp_away) {
result[index_diff, j] = result[index_diff, j] + 1
break
}
}
}
}
}
# Number of Tie at some point
write.csv(result,"Tie_AL_result_2015.csv")
# Count number of leads for inning by inning score
write.csv(total,"Tie_AL_total_2015.csv")
## Find valid games. Count games that marked "Final" && NL
count = 0
for (i in 1:nrow(game)) {
if ((game$status[i] == "Final") & (game$home_league_id[i] == 104)) {
valid_gid_NL <- c(valid_gid_NL, toString(game$url[i]))
}
}
## Game by game to count tie at some point during each game
gids_table <- data.frame(valid_gid_NL)
size = nrow(gids_table)
result = matrix(0, nrow = 8, ncol = 8)
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:size) {
temp <- XML2Obs(paste0(gids_table[i,1]))
single <- collapse_obs(temp)
single_game <- data.frame(single$`game//linescore`)
single_game$url <- NULL
single_game$home_inning_runs <- as.numeric(as.character(single_game$home_inning_runs))
single_game$away_inning_runs <- as.numeric(as.character(single_game$away_inning_runs))
single_game$inning <- as.numeric(as.character(single_game$inning))
length <- nrow(single_game)
for (j in 1:8) {
index_diff = abs(single_game[j,2] - single_game[j,3])
if (index_diff >= 8) {
index_diff = 8
}
if (index_diff > 0) {
total[index_diff, j] = total[index_diff, j] + 1
temp_home = single_game[j,2]
temp_away = single_game[j,3]
for (k in (j+1):length) {
if (toString(single_game[k,2]) == 'NA') {
single_game[k,2] = 0
}
temp_home = temp_home + single_game[k,2]
temp_away = temp_away + single_game[k,3]
if (temp_home == temp_away) {
result[index_diff, j] = result[index_diff, j] + 1
break
}
}
}
}
}
# Number of Tie at some point
write.csv(result,"Tie_NL_result_2015.csv")
# Count number of leads for inning by inning score
write.csv(total,"Tie_NL_total_2015.csv")
View(eight_run)
setwd("C:/Users/Jaewon/Desktop/Fall 2015/Research - Baseball Analytics/Inning Score/ALvsNL/")
temp_10 <- read.csv("Lead_AL_total_2010.csv")
temp_11 <- read.csv("Lead_AL_total_2011.csv")
temp_12 <- read.csv("Lead_AL_total_2012.csv")
temp_13 <- read.csv("Lead_AL_total_2013.csv")
temp_14 <- read.csv("Lead_AL_total_2014.csv")
temp_15 <- read.csv("Lead_AL_total_2015.csv")
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
total[i,j-1] = temp_13[i,j] + temp_14[i,j] + temp_15[i,j] + temp_12[i,j] + temp_11[i,j] + temp_10[i,j]
}
}
te_10 <- read.csv("Lead_AL_result_2010.csv")
te_11 <- read.csv("Lead_AL_result_2011.csv")
te_12 <- read.csv("Lead_AL_result_2012.csv")
te_13 <- read.csv("Lead_AL_result_2013.csv")
te_14 <- read.csv("Lead_AL_result_2014.csv")
te_15 <- read.csv("Lead_AL_result_2015.csv")
result = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
result[i,j-1] = te_13[i,j] + te_14[i,j] + te_15[i,j] + te_12[i,j] + te_11[i,j] + te_10[i,j]
}
}
percent = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(percent)) {
for (j in 1:ncol(percent)) {
percent[i,j] = result[i,j] / total[i,j]
}
}
write.csv(total, "combined_lead_AL_total.csv")
write.csv(result, "combined_lead_AL_result.csv")
write.csv(percent, "combined_lead_AL.csv")
setwd("C:/Users/Jaewon/Desktop/Fall 2015/Research - Baseball Analytics/Inning Score/ALvsNL/")
temp_10 <- read.csv("Lead_NL_total_2010.csv")
temp_11 <- read.csv("Lead_NL_total_2011.csv")
temp_12 <- read.csv("Lead_NL_total_2012.csv")
temp_13 <- read.csv("Lead_NL_total_2013.csv")
temp_14 <- read.csv("Lead_NL_total_2014.csv")
temp_15 <- read.csv("Lead_NL_total_2015.csv")
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
total[i,j-1] = temp_13[i,j] + temp_14[i,j] + temp_15[i,j] + temp_12[i,j] + temp_11[i,j] + temp_10[i,j]
}
}
te_10 <- read.csv("Lead_NL_result_2010.csv")
te_11 <- read.csv("Lead_NL_result_2011.csv")
te_12 <- read.csv("Lead_NL_result_2012.csv")
te_13 <- read.csv("Lead_NL_result_2013.csv")
te_14 <- read.csv("Lead_NL_result_2014.csv")
te_15 <- read.csv("Lead_NL_result_2015.csv")
result = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
result[i,j-1] = te_13[i,j] + te_14[i,j] + te_15[i,j] + te_12[i,j] + te_11[i,j] + te_10[i,j]
}
}
percent = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(percent)) {
for (j in 1:ncol(percent)) {
percent[i,j] = result[i,j] / total[i,j]
}
}
write.csv(total, "combined_lead_NL_total.csv")
write.csv(result, "combined_lead_NL_result.csv")
write.csv(percent, "combined_lead_NL.csv")
setwd("C:/Users/Jaewon/Desktop/Fall 2015/Research - Baseball Analytics/Inning Score/ALvsNL/")
temp_10 <- read.csv("Tie_NL_total_2010.csv")
temp_11 <- read.csv("Tie_NL_total_2011.csv")
temp_12 <- read.csv("Tie_NL_total_2012.csv")
temp_13 <- read.csv("Tie_NL_total_2013.csv")
temp_14 <- read.csv("Tie_NL_total_2014.csv")
temp_15 <- read.csv("Tie_NL_total_2015.csv")
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
total[i,j-1] = temp_13[i,j] + temp_14[i,j] + temp_15[i,j] + temp_12[i,j] + temp_11[i,j] + temp_10[i,j]
}
}
te_10 <- read.csv("Tie_NL_result_2010.csv")
te_11 <- read.csv("Tie_NL_result_2011.csv")
te_12 <- read.csv("Tie_NL_result_2012.csv")
te_13 <- read.csv("Tie_NL_result_2013.csv")
te_14 <- read.csv("Tie_NL_result_2014.csv")
te_15 <- read.csv("Tie_NL_result_2015.csv")
result = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
result[i,j-1] = te_13[i,j] + te_14[i,j] + te_15[i,j] + te_12[i,j] + te_11[i,j] + te_10[i,j]
}
}
percent = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(percent)) {
for (j in 1:ncol(percent)) {
percent[i,j] = result[i,j] / total[i,j]
}
}
write.csv(total, "combined_tie_NL_total.csv")
write.csv(result, "combined_tie_NL_result.csv")
write.csv(percent, "combined_tie_NL.csv")
setwd("C:/Users/Jaewon/Desktop/Fall 2015/Research - Baseball Analytics/Inning Score/ALvsNL/")
temp_10 <- read.csv("Tie_AL_total_2010.csv")
temp_11 <- read.csv("Tie_AL_total_2011.csv")
temp_12 <- read.csv("Tie_AL_total_2012.csv")
temp_13 <- read.csv("Tie_AL_total_2013.csv")
temp_14 <- read.csv("Tie_AL_total_2014.csv")
temp_15 <- read.csv("Tie_AL_total_2015.csv")
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
total[i,j-1] = temp_13[i,j] + temp_14[i,j] + temp_15[i,j] + temp_12[i,j] + temp_11[i,j] + temp_10[i,j]
}
}
te_10 <- read.csv("Tie_AL_result_2010.csv")
te_11 <- read.csv("Tie_AL_result_2011.csv")
te_12 <- read.csv("Tie_AL_result_2012.csv")
te_13 <- read.csv("Tie_AL_result_2013.csv")
te_14 <- read.csv("Tie_AL_result_2014.csv")
te_15 <- read.csv("Tie_AL_result_2015.csv")
result = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
result[i,j-1] = te_13[i,j] + te_14[i,j] + te_15[i,j] + te_12[i,j] + te_11[i,j] + te_10[i,j]
}
}
percent = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(percent)) {
for (j in 1:ncol(percent)) {
percent[i,j] = result[i,j] / total[i,j]
}
}
write.csv(total, "combined_tie_AL_total.csv")
write.csv(result, "combined_tie_AL_result.csv")
write.csv(percent, "combined_tie_AL.csv")
setwd("C:/Users/Jaewon/Desktop/Fall 2015/Research - Baseball Analytics/Inning Score/ALvsNL/")
temp_10 <- read.csv("Tie_AL_total_2010.csv")
temp_11 <- read.csv("Tie_AL_total_2011.csv")
temp_12 <- read.csv("Tie_AL_total_2012.csv")
temp_13 <- read.csv("Tie_AL_total_2013.csv")
temp_14 <- read.csv("Tie_AL_total_2014.csv")
temp_15 <- read.csv("Tie_AL_total_2015.csv")
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
total[i,j-1] = temp_13[i,j] + temp_14[i,j] + temp_15[i,j] + temp_12[i,j] + temp_11[i,j] + temp_10[i,j]
}
}
te_10 <- read.csv("Tie_AL_result_2010.csv")
te_11 <- read.csv("Tie_AL_result_2011.csv")
te_12 <- read.csv("Tie_AL_result_2012.csv")
te_13 <- read.csv("Tie_AL_result_2013.csv")
te_14 <- read.csv("Tie_AL_result_2014.csv")
te_15 <- read.csv("Tie_AL_result_2015.csv")
result = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
result[i,j-1] = te_13[i,j] + te_14[i,j] + te_15[i,j] + te_12[i,j] + te_11[i,j] + te_10[i,j]
}
}
percent = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(percent)) {
for (j in 1:ncol(percent)) {
percent[i,j] = result[i,j] / total[i,j]
}
}
write.csv(total, "combined_tie_AL_total.csv")
write.csv(result, "combined_tie_AL_result.csv")
write.csv(percent, "combined_tie_AL.csv")
setwd("C:/Users/Jaewon/Desktop/Fall 2015/Research - Baseball Analytics/Inning Score/ALvsNL/")
temp_10 <- read.csv("Lead_NL_total_2010.csv")
temp_11 <- read.csv("Lead_NL_total_2011.csv")
temp_12 <- read.csv("Lead_NL_total_2012.csv")
temp_13 <- read.csv("Lead_NL_total_2013.csv")
temp_14 <- read.csv("Lead_NL_total_2014.csv")
temp_15 <- read.csv("Lead_NL_total_2015.csv")
total = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
total[i,j-1] = temp_13[i,j] + temp_14[i,j] + temp_15[i,j] + temp_12[i,j] + temp_11[i,j] + temp_10[i,j]
}
}
te_10 <- read.csv("Lead_NL_result_2010.csv")
te_11 <- read.csv("Lead_NL_result_2011.csv")
te_12 <- read.csv("Lead_NL_result_2012.csv")
te_13 <- read.csv("Lead_NL_result_2013.csv")
te_14 <- read.csv("Lead_NL_result_2014.csv")
te_15 <- read.csv("Lead_NL_result_2015.csv")
result = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(temp_13)) {
for (j in 2:ncol(temp_13)) {
result[i,j-1] = te_13[i,j] + te_14[i,j] + te_15[i,j] + te_12[i,j] + te_11[i,j] + te_10[i,j]
}
}
percent = matrix(0, nrow = 8, ncol = 8)
for (i in 1:nrow(percent)) {
for (j in 1:ncol(percent)) {
percent[i,j] = result[i,j] / total[i,j]
}
}
write.csv(total, "combined_lead_NL_total.csv")
write.csv(result, "combined_lead_NL_result.csv")
write.csv(percent, "combined_lead_NL.csv")
